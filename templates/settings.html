{% extends "base.html" %}

{% block title %}Camera Settings{% endblock %}

{% block page_title %}Camera Settings{% endblock %}

{% block content %}
<div class="control-panel">
    {% with messages = get_flashed_messages() %}
    {% if messages %}
    {% for message in messages %}
    <div class="alert">{{ message }}</div>
    {% endfor %}
    {% endif %}
    {% endwith %}

    <div class="control-group">
        <h3>Add New Camera</h3>
        <form method="POST" action="{{ url_for('settings.settings_page') }}">
            <div class="form-group">
                <label for="camera_name" class="label">Camera Name:</label>
                <input type="text" class="form-control" id="camera_name" name="camera_name"
                       value="{{ settings.camera_name if settings else '' }}" required>
                <br>
                <label for="camera_url" class="label">Camera URL:</label>
                <input type="text" class="form-control" id="camera_url" name="camera_url"
                       value="{{ settings.camera_url if settings else '' }}" required>
            </div>
            <button type="submit" class="add-button">Add Camera</button>
        </form>
    </div>

    <div class="control-group">
        <h3>Camera List</h3>
        <div class="row">
            {% for camera in cameras %}
            <div class="col-md-4 mb-3">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">{{ camera.name }}</h5>
                        <p class="card-text">URL: {{ camera.url }}</p>
                        <form method="POST" action="{{ url_for('settings.delete_camera', camera_id=camera.id) }}">
                            <button type="submit" class="remove-button"
                                    onclick="return confirm('Are you sure you want to delete this camera?')">
                                Delete Camera
                            </button>
                        </form>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}